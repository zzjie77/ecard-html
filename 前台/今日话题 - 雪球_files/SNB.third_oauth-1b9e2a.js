define("SNB.third_oauth.js",[],function(){function o(o){var i=new Date;i.setTime(i.getTime()-1e4),document.cookie=o+"=a; expires="+i.toGMTString()}function i(i){return o("xq_a_token"),o("xq_r_token"),o("xq_is_login"),$.cookie("xq_a_token",null,{path:"/",domain:"xueqiu.com"}),$.cookie("xq_a_token",null,{path:"/",domain:".xueqiu.com"}),$.cookie("xq_r_token",null,{path:"/",domain:"xueqiu.com"}),$.cookie("xq_r_token",null,{path:"/",domain:".xueqiu.com"}),$.cookie("xq_is_login",null,{path:"/",domain:"xueqiu.com"}),$.cookie("xq_is_login",null,{path:"/",domain:".xueqiu.com"}),$.cookie("xq_is_login")&&"undefined"!=typeof i&&i.directLogin?location.href="/?_="+SNB.Util.getTimestamp():void 0}SNB.third_oauth={},SNB.third_oauth={oauthLogin:function(o,e){i(e);var n="",t="",o=o||"sina";return"sina"==o&&(n=SNB.currentUser.isGuest?SNB.domain.host+"/oauth2/login3?source="+o:SNB.domain.host+"/oauth2/bind?source="+o,t="sina_connect"),window.open(n,t,SNB.Util.getWindowSize()),!1},oauth_refreshToken:function(o){var i=o+"_refreshToken",o=o||"sina",e="";return"sina"===o?(e=SNB.domain.host+"/oauth2/refreshtoken?source="+o,window.open(e,i,SNB.Util.getWindowSize()),!1):void SNB.third_oauth.oauthLogin_qq(i)},oauthLogin_qq:function(o){i(o);var e="qq_oauthLogin",n="https://graph.qq.com/oauth2.0/authorize?response_type=token&client_id=100229413&redirect_uri=http%3A%2F%2Fxueqiu.com/service/qqconnect&scope=get_user_info,add_share,add_t";return window.open(n,e,SNB.Util.getWindowSize({width:840,height:600})),!1},oauthLogin_wc:function(o){i(o);var e="wc_oauthLogin",n="https://open.weixin.qq.com/connect/qrconnect?appid=wx0c5bd6af79a89c2d&redirect_uri=http%3A%2F%2Fxueqiu.com/service/wcconnect&response_type=code&scope=snsapi_login";return window.open(n,e,SNB.Util.getWindowSize({width:840,height:600})),!1},oauthBind:function(o,i){SNB.post("/account/oauth/bind.json",i,function(i){SNB.Util.callBrick({loggedIn:i}),SNB.Util.isSnowBrick()||(o.loading_image.hide(),$.get("/user/show.json",function(o){i.user=o,window.location.href="/?_="+SNB.Util.getTimestamp()}))},function(i){return SNB.data.submitting=!1,o.loading_image.hide(),"20030"===i.error_code?void o.errorMsg.text("登录密码错误"):void o.errorMsg.text(i.error_description)})},oauthRegiter:function(o,i){var e=$.trim(o.email.val()),n=function(){o.email_err.html("该邮箱已注册，<a href='javascript:;' id='bindLogin'>绑定帐号</a>"),$("#bindLogin").on("click",function(){var o=$("#loginTab"),i=$("#loginTabForm");o.click(),i.find("input[name='email']").val(e),i.find("input[name='pw']").focus()})};SNB.Util.verifyEmail(e,function(e){e.success?SNB.post("/account/oauth/signup.json",i,function(){o.loading_image.hide(),location.href="/users/reg/step01?source="+i.source},function(e){return SNB.data.submitting=!1,o.loading_image.hide(),"20029"===e.error_code?void n():"21715"===e.error_code?void o.errorMsg.text("该帐号涉嫌恶意注册已被禁用。如需帮助，请发邮件至：service@xueqiu.com"):"20602"===e.error_code?void o.errorMsg.html("请求参数出错，请您重新登录"+i.source+"，<a href='"+SNB.domain.host+"'>请点击此处跳转首页</a>，然后重新点击绑定"+i.source+"帐号"):void o.errorMsg.text(e.error_description)}):(SNB.data.submitting=!1,o.loading_image.hide(),"该邮箱已注册"===e.message?n():(o.email_err.text(e.message),o.email.focus()))})},update_third:function(o,i,e){SNB.post("/statuses/update_third.json",o,function(){i&&i()},function(o){SNB.logger("分享失败"),SNB.logger(o),e&&e()})}}});