define("widget/util/share.js",["at-dialog.jade.js","SNB.editor"],function(e,t,a){function s(e,t){function a(){if(c.hasClass("disabled"))return!1;var e=SNB.Util.cleanContent(p.getContent(),!1,p.editor);return e?(c.addClass("disabled"),void SNB.Util.updateStatus({status:e},function(){c.removeClass("disabled"),d.dialog("close")},function(){c.removeClass("disabled")})):(p.$textarea.addClass("error"),u.text("请输入内容。"),!1)}var s=$.Deferred(),o=s.promise(),d=$(r()),l=$(".tipsdivcontent",d),u=$(".errMsg",d),c=$(".submitAtHeButton",d);$("body").append(d),d.dialog({title:i,modal:!0,width:520,close:function(){d.dialog("destroy").remove(),$("#editor-at-suggestion").remove(),p.$textarea.remove()}});var p=n.init(l,{$emotion:$(".showFaceButton",d),$stock:$(".addStock",d),ctrlReturn:!0,submitFunc:a}),g=function(){u.text(""),p.$textarea.removeClass("error")};p.$textarea.focus(g),$(".cancelAtHeButton",d).click(function(){d.dialog("close")}),$.browser.isMobile?s.resolve(p):p.editor||p.upgrade({autoheight:!1},function(){$(".ueditor-wrapper",d).height(100),p.editor.addListener("keyup",g),s.resolve(p)}),c.click(a),u.text(""),c.removeClass("disabled"),o.done(function(e){e.reset(t)})}function o(e,t){return this.init(e,t)}var i,r=e("at-dialog.jade"),n=e("SNB.editor.js");o.prototype={init:function(e,t){i=e,$("#editor-at-suggestion").remove(),s(e,t)}},a.exports=function(e,t){return new o(e,t)}}),define("at-dialog.jade.js",function(require,exports,module){function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){buf.push('<div id="dialog-at-he" class="dialog-wrapper"><div class="tipsdivcontent"><textarea id="atHeStatusTextBox" class="tips_textarea"></textarea></div><p class="counttxt"><span title="表情" class="showFaceButton"></span><span title="股票" class="addStock"></span><span class="wordsRemain"></span></p><div style="text-align:center;width:100%"><span style="color: red" class="errMsg"></span><input type="button" value="发布" class="submit submitAtHeButton disabled"/></div></div>')}return buf.join("")}module.exports=anonymous});